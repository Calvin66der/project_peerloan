var Login = function() {		$.validator.addMethod("pwrule_capital",        function(value, element) {            return /[A-Z]/.test(value) // has a capital letter    });    $.validator.addMethod("pwrule_special",        function(value, element) {            return /^[A-Za-z0-9-_]+$/.test(value) // match only these character    });	    var handleLogin = function() {        $('.login-form').validate({            errorElement: 'span', //default input error message container            errorClass: 'help-block', // default input error message class            focusInvalid: false, // do not focus the last invalid input            rules: {                email: {                    required: true,                    //email: true                    maxlength: 30,                },                password: {                    required: true                },                remember: {                    required: false                },                new_password: {                    required: true,                    minlength: 8,                	pwrule_capital: true,	                pwrule_special: true,                },		        r_new_password: {                    equalTo: "#new_password"                },            },            messages: {                email: {                    required: "請輸入電子郵箱。",                    maxlength: "請輸入不超過30個字符。"                },                password: {                    required: "請輸入密碼。"                },	            new_password: {	            	required: "請輸入新密碼。",	            	minlength: "請輸入至少8位長度。",        			pwrule_capital: "請輸入至少一個大寫字母。",        			pwrule_special: "請只使用 '-' 和 '_' 特殊符號。",        		},        		r_new_password: {        			equalTo: "請重新輸入相同的新密碼。",	        	},            },            //invalidHandler: function(event, validator) { //display error alert on form submit               //    $('.alert-danger', $('.login-form')).show();            //},            highlight: function(element) { // hightlight error inputs                $(element)                    .closest('.form-group').addClass('has-error'); // set error class to the control group            },            success: function(label) {                label.closest('.form-group').removeClass('has-error');                label.remove();            },            errorPlacement: function(error, element) {                //error.insertAfter(element.closest('.input-icon'));                error.insertAfter(element);            },            submitHandler: function(form) {                form.submit(); // form validation success, call ajax form submit            }        });                $('.login-form input').keypress(function(e) {            if (e.which == 13) {                if ($('.login-form').validate().form()) {                    $('.login-form').submit(); //form validation success, call ajax form submit                }                return false;            }        });    }    var handleForgetPassword = function() {        $('.forget-form').validate({            errorElement: 'span', //default input error message container            errorClass: 'help-block', // default input error message class            focusInvalid: false, // do not focus the last invalid input            ignore: "",            rules: {                email: {                    required: true,                    email: true,                    maxlength: 30,                },            },            messages: {                email: {                    required: "請輸入電子郵箱",                    maxlength: "請輸入不超過30個字符。"                },            },            //invalidHandler: function(event, validator) { //display error alert on form submit               //},            highlight: function(element) { // hightlight error inputs                $(element)                    .closest('.form-group').addClass('has-error'); // set error class to the control group            },            success: function(label) {                label.closest('.form-group').removeClass('has-error');                label.remove();            },            errorPlacement: function(error, element) {                error.insertAfter(element);            },            submitHandler: function(form) {                form.submit();            }        });        $('.forget-form input').keypress(function(e) {            if (e.which == 13) {                if ($('.forget-form').validate().form()) {                    $('.forget-form').submit();                }                return false;            }        });        jQuery('#forget-password').click(function() {            jQuery('.login-form').hide();            jQuery('.forget-form').show();        });        jQuery('#back-btn').click(function() {            jQuery('.login-form').show();            jQuery('.forget-form').hide();        });    }    var handleRegister = function() {        function format(state) {            if (!state.id) { return state.text; }            var $state = $(             '<span><img src="../assets/global/img/flags/' + state.element.value.toLowerCase() + '.png" class="img-flag" /> ' + state.text + '</span>'            );                        return $state;        }        if (jQuery().select2 && $('#country_list').size() > 0) {            $("#country_list").select2({	            placeholder: '<i class="fa fa-map-marker"></i>&nbsp;Select a Country',	            templateResult: format,                templateSelection: format,                width: 'auto', 	            escapeMarkup: function(m) {	                return m;	            }	        });	        $('#country_list').change(function() {	            $('.register-form').validate().element($(this)); //revalidate the chosen dropdown value and show error or success message for the input	        });    	}        $('.register-form').validate({            errorElement: 'span', //default input error message container            errorClass: 'help-block', // default input error message class            focusInvalid: false, // do not focus the last invalid input            ignore: "",            rules: {                email: {                    required: true,                    email: true,                    maxlength: 30,                },	            register_password: {                    required: true,                    minlength: 8,                	pwrule_capital: true,                	pwrule_special: true,                },	            r_register_password: {                    equalTo: "#register_password"                },                tnc: {                    required: true                }            },            messages: { // custom messages for radio buttons and checkboxes            	email: {            		required: "請輸入電子郵箱。",            		email: "請輸入有效的電子郵箱。",            		maxlength: "請輸入不超過30個字符。"	            },            	register_password: {            		required: "請輸入新密碼。",            		minlength: "請輸入至少8位長度。",        			pwrule_capital: "請輸入至少一個大寫字母。",        			pwrule_special: "請只使用 '-' 和 '_' 特殊符號。",        		},        		r_register_password: {                    equalTo: "請重新輸入相同的新密碼。",                },                tnc: {                    required: "請先同意重要聲明及隱私政策。"                }            },            //invalidHandler: function(event, validator) { //display error alert on form submit               //},            highlight: function(element) { // hightlight error inputs                $(element)                    .closest('.form-group').addClass('has-error'); // set error class to the control group            },            success: function(label) {                label.closest('.form-group').removeClass('has-error');                label.remove();            },            errorPlacement: function(error, element) {                if (element.attr("name") == "tnc") { // insert checkbox errors after the container                                      error.insertAfter($('#register_tnc_error'));                } else if (element.attr("name") == "user_type") {            		error.insertAfter($('#register_user_type_error'));            	}                  else if (element.closest('.input-icon').size() == 1) {                    error.insertAfter(element.closest('.input-icon'));                } else {                    error.insertAfter(element);                }            },            submitHandler: function(form) {                form.submit();            }        });        $('.register-form input').keypress(function(e) {            if (e.which == 13) {                if ($('.register-form').validate().form()) {                    $('.register-form').submit();                }                return false;            }        });        jQuery('#register-btn').click(function() {            jQuery('.login-form').hide();            jQuery('.register-form').show();        });        jQuery('#register-back-btn').click(function() {            jQuery('.login-form').show();            jQuery('.register-form').hide();        });    }    return {        //main function to initiate the module        init: function() {            handleLogin();            handleForgetPassword();            handleRegister();        }    };}();jQuery(document).ready(function() {    Login.init();});