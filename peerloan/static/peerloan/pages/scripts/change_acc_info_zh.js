function FormHandle(form) {	var formData = new window.FormData(),		formParams = $(form).serializeArray(),		formAction = $(form).attr("action"),		formModal = $(form).attr("modal");	    $.each(formParams, function(i, val) {        formData.append(val.name, val.value);    });		if ($(form).find('[type="file"]').length != 0) {		var formFiles = $(form).find('[type="file"]')[0].files;		$.each(formFiles, function(i, file) {	        formData.append(file.name, file);	    });	}        $.ajax({        type: "POST",        url: formAction,        data: formData,        mimeType: "multipart/form-data",	    contentType: false,	    cache: false,	    processData: false,        success: function (data, status) {        	$('#'+formModal).modal('hide');            alert(data);            window.location.reload(true);        }    });    return false; // required to block normal submit since you used ajax};var FormValidation = function () {	$.validator.addMethod("pwrule_capital",        function(value, element) {            return /[A-Z]/.test(value) // has a capital letter    }, "請輸入至少一個大寫字母");    $.validator.addMethod("pwrule_special",        function(value, element) {            return /^[A-Za-z0-9-_]+$/.test(value) // match only these character    }, "請只使用'-'和'_'特殊符號");    $.validator.addMethod("beginwith569",	    function(value, element) {	        return /^5[0-9].*$/.test(value) || /^6[0-9].*$/.test(value)|| /^9[0-9].*$/.test(value);	}, "手提號碼首位數為5, 6, 9");        var handleValidation = function() {        // for more info visit the official plugin documentation:             // http://docs.jquery.com/Plugins/Validation        $('#ChangePasswordForm').validate({            errorElement: 'span', //default input error message container            errorClass: 'help-block', // default input error message class            focusInvalid: false, // do not focus the last invalid input            ignore: "",  // validate all fields including form hidden input            rules: {                	"Current Password": {                		required: true	                },                    "New Password": {	                    required: true,	                    minlength: 8,	                	pwrule_capital: true,	                	pwrule_special: true,	                },			        "Retype New Password": {			        	required: true,	                    equalTo: "#New_Password"	                },                },            messages: { // custom messages for radio buttons and checkboxes            	"Current Password": {            		required: "請輸入此欄"                },            	"New Password": {            		required: "請輸入此欄",	                minlength: "至少輸入8位數字"        		},        		"Retype New Password": {		        	required: "請輸入此欄",                    equalTo: "請重新輸入相同的新密碼"                },            },            highlight: function(element) { // hightlight error inputs                $(element)                    .closest('.form-group').addClass('has-error'); // set error class to the control group            },            success: function(label) {                label.closest('.form-group').removeClass('has-error');                label.remove();            },            errorPlacement: function(error, element) {            	element.siblings('.help-block').remove();            	error.insertAfter(element);            },            submitHandler: function (form) {                FormHandle(form);            }        });        	$('#ChangeMobileForm').validate({            errorElement: 'span', //default input error message container            errorClass: 'help-block', // default input error message class            focusInvalid: false, // do not focus the last invalid input            ignore: "",  // validate all fields including form hidden input            rules: {		            "New Mobile": {                    	minlength: 8,                    	maxlength: 8,	                    integer: true,	                    min: 0,                    	beginwith569: true,                    },                },            messages: { // custom messages for radio buttons and checkboxes	        	"New Mobile": {	        		required: "請輸入此欄",            		minlength: "至少輸入8位數字",                	maxlength: "至多輸入8位數字",                    integer: "請輸入一個號碼",                    min: "請輸入一個號碼",            	},            	"Email OTP Code": {            		required: "請輸入此欄",            	}            },            highlight: function(element) { // hightlight error inputs                $(element)                    .closest('.form-group').addClass('has-error'); // set error class to the control group            },            success: function(label) {                label.closest('.form-group').removeClass('has-error');                label.remove();            },            errorPlacement: function(error, element) {            	element.siblings('.help-block').remove();            	error.insertAfter(element);            },            submitHandler: function (form) {                FormHandle(form);            }        });                $('#ChangeAddressForm').validate({            errorElement: 'span', //default input error message container            errorClass: 'help-block', // default input error message class            focusInvalid: false, // do not focus the last invalid input            ignore: "",  // validate all fields including form hidden input            rules: {                },            messages: { // custom messages for radio buttons and checkboxes	        	"New Address": {	        		required: "請輸入此欄",		        },		        "Address Proof": {		        	required: "請輸入此欄",		        },            },            highlight: function(element) { // hightlight error inputs                $(element)                    .closest('.form-group').addClass('has-error'); // set error class to the control group            },            success: function(label) {                label.closest('.form-group').removeClass('has-error');                label.remove();            },            errorPlacement: function(error, element) {            	if (element.attr("type") == 'text') {	            	element.siblings('.help-block').remove();	            	error.insertAfter(element);	            } else if (element.attr("type") == 'file')	{	            	element.parent().parent("div").siblings('.help-block').remove();            		error.insertAfter( element.parent().parent("div") );            	}            },            submitHandler: function (form) {                FormHandle(form);            }        });                $('#ChangeBankAccForm').validate({            errorElement: 'span', //default input error message container            errorClass: 'help-block', // default input error message class            focusInvalid: false, // do not focus the last invalid input            ignore: "",  // validate all fields including form hidden input            rules: {            	"New Bank Account": {	                    integer: true,	                    min: 0,                    },                },            messages: { // custom messages for radio buttons and checkboxes	        	"New Bank Account": {            		integer: "請只輸入數字",            		required: "請輸入此欄",            	},            	"Bank Account Proof": {            		required: "請輸入此欄",	            },            },            highlight: function(element) { // hightlight error inputs                $(element)                    .closest('.form-group').addClass('has-error'); // set error class to the control group            },            success: function(label) {                label.closest('.form-group').removeClass('has-error');                label.remove();            },            errorPlacement: function(error, element) {            	if (element.attr("type") == 'text') {	            	element.siblings('.help-block').remove();	            	error.insertAfter(element);	            } else if (element.attr("type") == 'file')	{	            	element.parent().parent("div").siblings('.help-block').remove();            		error.insertAfter( element.parent().parent("div") );            	}            },            submitHandler: function (form) {                FormHandle(form);            }        });                $('#').validate({            errorElement: 'span', //default input error message container            errorClass: 'help-block', // default input error message class            focusInvalid: false, // do not focus the last invalid input            ignore: "",  // validate all fields including form hidden input                        messages: { // custom messages for radio buttons and checkboxes	        	"New Office Address": {            		required: "請輸入此欄",            	},            	"Office Address Proof": {            		required: "請輸入此欄",	            },            },            highlight: function(element) { // hightlight error inputs                $(element)                    .closest('.form-group').addClass('has-error'); // set error class to the control group            },            success: function(label) {                label.closest('.form-group').removeClass('has-error');                label.remove();            },            errorPlacement: function(error, element) {            	if (element.attr("type") == 'text') {	            	element.siblings('.help-block').remove();	            	error.insertAfter(element);	            } else if (element.attr("type") == 'file')	{	            	element.parent().parent("div").siblings('.help-block').remove();            		error.insertAfter( element.parent().parent("div") );            	}            },            submitHandler: function (form) {                FormHandle(form);            }        });    }        var handleWysihtml5 = function() {        if (!jQuery().wysihtml5) {            return;        }        if ($('.wysihtml5').size() > 0) {            $('.wysihtml5').wysihtml5({                "stylesheets": ["../assets/global/plugins/bootstrap-wysihtml5/wysiwyg-color.css"]            });        }    }    return {        //main function to initiate the module        init: function () {            handleWysihtml5();            handleValidation();        }    };}();jQuery(document).ready(function() {    FormValidation.init();});