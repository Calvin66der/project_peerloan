<!DOCTYPE html><!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]--><!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]--><!--[if !IE]><!--><html lang="en">    <!-- BEGIN HEAD -->    <head>        <meta charset="utf-8" />        <title>Zwap</title>        <meta http-equiv="X-UA-Compatible" content="IE=edge">        <meta content="width=device-width, initial-scale=1" name="viewport" />        <meta content="" name="description" />        <meta content="" name="author" />        {% load staticfiles %}        {% load my_tags %}        <script src="//code.jquery.com/jquery-1.10.2.js"></script>        <script>		$(function(){		  $("#header").load("/header/{{cate}}/{{sub_cate}}", function(){Layout.init()}); 		  $("#footer").load("/footer"); 		});		</script>        <!-- BEGIN GLOBAL MANDATORY STYLES -->        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/simple-line-icons/simple-line-icons.min.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/uniform/css/uniform.default.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css' %}" rel="stylesheet" type="text/css" />        <!-- END GLOBAL MANDATORY STYLES -->        <!-- BEGIN PAGE LEVEL PLUGINS -->        <link href="{% static 'peerloan/global/plugins/datatables/datatables.min.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css' %}" rel="stylesheet" type="text/css" />        <!-- END PAGE LEVEL PLUGINS -->        <!-- BEGIN THEME GLOBAL STYLES -->        <link href="{% static 'peerloan/global/css/components.min.css' %}" rel="stylesheet" id="style_components" type="text/css" />        <link href="{% static 'peerloan/global/css/plugins.min.css' %}" rel="stylesheet" type="text/css" />        <!-- END THEME GLOBAL STYLES -->        <!-- BEGIN THEME LAYOUT STYLES -->        <link href="{% static 'peerloan/layouts/layout3/css/layout.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/layouts/layout3/css/themes/default.min.css' %}" rel="stylesheet" type="text/css" id="style_color" />        <link href="{% static 'peerloan/layouts/layout3/css/custom.min.css' %}" rel="stylesheet" type="text/css" />        <!-- END THEME LAYOUT STYLES -->        <!-- BEGIN BAIDU ECHARTS PLUGINS -->        <!-- END BAIDU ECHARTS PLUGINS -->        <link rel="shortcut icon" href="{% static 'favicon.ico' %}" />        <style>        	.table-scrollable				{				 overflow-x:hidden !important;				 overflow-y:hidden !important;				 border: 0px !important;				}			.dataTable.no-footer				{					border-bottom: 0px !important;				}			.portlet-body				{				padding-top: 0px !important;				}        </style>    </head>    <!-- END HEAD -->    <body class="page-container-bg-solid page-boxed">        <!-- BEGIN HEADER -->        <div id="header"></div>        <!-- END HEADER -->        <!-- BEGIN CONTAINER -->        <div class="page-container">            <!-- BEGIN CONTENT -->            <div class="page-content-wrapper">            	<!-- BEGIN PAGE HEAD-->                <div class="page-head">                    <div class="container">	                    <!-- BEGIN PAGE TITLE -->	                    <div class="page-title">	                        <h1>Overall Repayment Schedule</h1>	                    </div>                    </div>                </div>                <!-- END PAGE HEAD-->                <!-- BEGIN CONTENT BODY -->                <!-- BEGIN PAGE CONTENT BODY -->                <div class="page-content">                    <div class="container">                        <!-- BEGIN PAGE CONTENT INNER -->                        <div class="page-content-inner">                            <div class="row">                                <div class="col-md-12">                                    <div class="portlet light portlet-fit portlet-form ">                                        <div class="portlet-body">                                        	<div class="row">                                        		<div class="col-md-4"></div>	                                        	<div class="col-md-4"></div>		                                        <div class="col-md-4">		                                        	<select id="bor" class="form-control select2" onchange="get_selected_bor();">		                                        		{% for bor in bor_list %}		                                        		<option value="{{bor|access_list:0}}">{{bor|access_list:1}}</option>		                                        		{% endfor %}		                                        	</select>		                                        </div>		                                    </div>		                                    <div class="row">		                                    	<div class="portlet light ">		                                    		<div class="portlet-title">		                                    			<div class="caption">															<span class="caption-subject font-dark bold">Paid/Outstanding Balance Status</span>														</div>													</div>													<div class="portlet-body">														<table class="" id="table1">														</table>													</div>												</div>											</div>											<div class="row">		                                    	<div class="portlet light ">		                                    		<div class="portlet-title">		                                    			<div class="caption">															<span class="caption-subject font-dark bold">Distribution of Paid/Outstanding Principal</span>														</div>													</div>													<div class="portlet-body">														<div id="echarts_pie_repay" style="height:400px;"></div>													</div>												</div>											</div>											<div class="row">		                                    	<div class="portlet light ">		                                    		<div class="portlet-title">		                                    			<div class="caption">															<span class="caption-subject font-dark bold">Estimated Repayment Schedule</span>														</div>													</div>													<div class="portlet-body">														<table class="" id="table2">															<thead>						                                        <tr>						                                            <th> Date<br>(DD/MM/YYYY) </th>						                                            <th> Outstanding Principal ($)</th>						                                            <th> Outstanding Interest ($)</th>						                                            <th> Outstanding Balance ($)</th>						                                            <th> Paid Principal ($)</th>						                                            <th> Paid Interest ($)</th>						                                            <th> Reference Number </th>						                                            <th> Product Name </th>						                                        	<th> Installment ($/month)</th>						                                            <th> Status </th>						                                        							                                        </tr>						                                    </thead>														</table>													</div>												</div>											</div>																						                                        </div>                                    </div>                                </div>                            </div>                        </div>                        <!-- END PAGE CONTENT INNER -->                    </div>                </div>                <!-- END PAGE CONTENT BODY -->                <!-- END CONTENT BODY -->            </div>            <!-- END CONTENT -->        </div>        <!-- END CONTAINER -->        <!-- BEGIN FOOTER -->        <div id="footer"></div>        <!-- END FOOTER -->        <!--[if lt IE 9]><script src="../assets/global/plugins/respond.min.js"></script><script src="../assets/global/plugins/excanvas.min.js"></script> <![endif]-->        <!-- BEGIN CORE PLUGINS -->        <script src="{% static 'peerloan/global/plugins/jquery.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/js.cookie.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js' %}" type="text/javascript"></script>        <!-- END CORE PLUGINS -->        <!-- BEGIN PAGE LEVEL PLUGINS -->        <script src="{% static 'peerloan/global/scripts/datatable.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/datatables/datatables.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js' %}" type="text/javascript"></script>        <!-- END PAGE LEVEL PLUGINS -->        <!-- BEGIN THEME GLOBAL SCRIPTS -->        <script src="{% static 'peerloan/global/scripts/app.min.js' %}" type="text/javascript"></script>        <!-- END THEME GLOBAL SCRIPTS -->        <!-- BEGIN PAGE LEVEL SCRIPTS -->        <script src="{% static 'peerloan/pages/scripts/table-datatables-buttons.min.js' %}" type="text/javascript"></script>        <!-- END PAGE LEVEL SCRIPTS -->        <!-- BEGIN THEME LAYOUT SCRIPTS -->        <script src="{% static 'peerloan/layouts/layout3/scripts/layout.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/layouts/layout3/scripts/demo.min.js' %}" type="text/javascript"></script>        <!-- END THEME LAYOUT SCRIPTS -->		<!-- BEGIN BAIDU ECHARTS SCRIPTS -->		<!--<script src="{% static 'peerloan/pages/scripts/charts-echarts-dashboard.js' %}" type="text/javascript"></script>-->		<script src="{% static 'peerloan/global/plugins/echarts/echarts.js' %}" type="text/javascript"></script>        <!-- END BAIDU ECHARTS SCRIPTS -->    </body><script type="text/javascript" language="javascript" class="init">var selected_bor = document.getElementById('bor').value;function get_selected_bor(){	selected_bor = document.getElementById('bor').value;}function update_datatable(){    $('#table1').DataTable( {        "ajax": "/repayboard_list_json/?bor_id="+selected_bor,        columns: [        { "data": 'key' },        { "data": 'value' },        ],        "bPaginate": false,        "bSort": false,        bFilter: false,        bInfo: false,        "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {							if (aData['key'].indexOf('Overdue') > -1 && aData['value'] != '$0.0') {							$("td:eq(1)",nRow).css('color', 'red');							}						}    } );    document.getElementById("table1").deleteTHead();        $('#table2').DataTable( {        "ajax": "/repaytable_list_json/?bor_id="+selected_bor,        columns: [        { "data": 'date' },        { "data": 'os_principal' },        { "data": 'os_interest' },        { "data": 'os_balance' },        { "data": 'paid_principal' },        { "data": 'paid_interest' },        { "data": 'ref_num' },        { "data": 'prod_name' },        { "data": 'installment' },        { "data": 'status' },        ],        "bLengthChange": false,        "pageLength": 12,        "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {							if (aData['status'] == "OVERDUE") {							$(nRow).css('color', 'red');							}						},		"bInfo" : false    } );}$(document).ready(function() {      	update_datatable();});$('#bor').change(function() {	$("#table1").dataTable().fnDestroy();	$("#table2").dataTable().fnDestroy();	update_datatable();});</script><script type="text/javascript" language="javascript" class="init">var selected_bor = document.getElementById('bor').value;var data_list = [];var color_list = [];var option = {    tooltip : {        trigger: 'item',        formatter: "{a} <br/>{b} : {c} ({d}%)"    },    series : [        {            name:'Source',            type:'pie',            center : ['50%', '60%'],            radius : '55%',            itemStyle : {                normal : {                	color: function(params) {                        // build a color map as your need.                        return color_list[params.dataIndex]                    },                },            },            data:[]        }    ]}function update_pie_echart() {	// ECHARTS    require.config({        paths: {            echarts: "/static/peerloan/global/plugins/echarts/"        }    });    // DEMOS    require(        [            'echarts',            'echarts/chart/pie',        ],		function(ec) {			// -- PIE --            var myChartpie = ec.init(document.getElementById('echarts_pie_repay'));            $.ajax({				type: "get",				async: false,				url: "/repaypie_list_json/?bor_id="+selected_bor,				dataType: "json",				success: function (result) {					if (result) {						data_list = [];						color_list = [];						for (object in result.data)						{							data_list.push({value:result.data[object].amount, name:result.data[object].name});							color_list.push(result.data[object].color)						}					}					else {						alert("Error: Result not find");					}				},				error: function (errorMsg) {					alert("Error: Loading JSON");				}			});						option.series[0].data=data_list;			myChartpie.setOption(option);        }    );}$(document).ready(function() {	update_pie_echart();});$('#bor').change(function() {	update_pie_echart();});</script></html>{% load google_analytics_tags %}<div style="display:none">    <img src="{% google_analytics %}" width="0" height="0" /></div>