
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
{% load i18n %}
{% language lang %}
<html lang="en">
    <!-- BEGIN HEAD -->
    <head>
        <meta charset="utf-8" />
        <title>{% trans "Zwap" %}</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta content="width=device-width, initial-scale=1" name="viewport" />
        <meta content="" name="description" />
        <meta content="" name="author" />
        {% load staticfiles %}
        {% load my_tags %}
        <script src="//code.jquery.com/jquery-1.10.2.js"></script>
        <script>
		$(function(){
		  $("#header").load("/header/{{cate}}/{{sub_cate}}", function(){Layout.init()}); 
		  $("#footer").load("/footer"); 
		});
		</script>
		<style>
			#table1_filter{
				display: none;
			}
			.pad-top-5 {
				padding-top: 5px;
			}
		</style>
        <!-- BEGIN GLOBAL MANDATORY STYLES -->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
        <link href="{% static 'peerloan/global/plugins/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'peerloan/global/plugins/simple-line-icons/simple-line-icons.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'peerloan/global/plugins/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'peerloan/global/plugins/uniform/css/uniform.default.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'peerloan/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END GLOBAL MANDATORY STYLES -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <link href="{% static 'peerloan/global/plugins/datatables/datatables.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'peerloan/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'peerloan/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'peerloan/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'peerloan/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END PAGE LEVEL PLUGINS -->
        <!-- BEGIN THEME GLOBAL STYLES -->
        <link href="{% static 'peerloan/global/css/components.min.css' %}" rel="stylesheet" id="style_components" type="text/css" />
        <link href="{% static 'peerloan/global/css/plugins.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END THEME GLOBAL STYLES -->
        <!-- BEGIN THEME LAYOUT STYLES -->
        <link href="{% static 'peerloan/layouts/layout3/css/layout.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'peerloan/layouts/layout3/css/themes/default.min.css' %}" rel="stylesheet" type="text/css" id="style_color" />
        <link href="{% static 'peerloan/layouts/layout3/css/custom.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END THEME LAYOUT STYLES -->
        <!-- BEGIN BAIDU ECHARTS PLUGINS -->
        <!-- END BAIDU ECHARTS PLUGINS -->
        <link rel="shortcut icon" href="{% static 'favicon.ico' %}" />
    </head>
    <!-- END HEAD -->
    <body class="page-container-bg-solid page-boxed">
        <!-- BEGIN HEADER -->
        <div id="header"></div>
        <!-- END HEADER -->
        <!-- BEGIN CONTAINER -->
        <div class="page-container">
            <!-- BEGIN CONTENT -->
            <div class="page-content-wrapper">
            	<!-- BEGIN PAGE HEAD-->
                <div class="page-head">
                    <div class="container">
	                    <!-- BEGIN PAGE TITLE -->
	                    <div class="page-title">
	                        <h1>{{title}}</h1>
	                    </div>
                    </div>
                </div>
                <!-- END PAGE HEAD-->
                <!-- BEGIN CONTENT BODY -->
                <!-- BEGIN PAGE CONTENT BODY -->
                <div class="page-content">
                    <div class="container">
                        <!-- BEGIN PAGE CONTENT INNER -->
                        <div class="page-content-inner">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="portlet light">
                                        <div class="portlet-body form">
                                        	<form validate action="javascript:;" class="form-horizontal" method="post" enctype="multipart/form-data">
	                                        	<div class="form-body">
		                                        	<div class="row">
		                                        		<div class="col-md-4">
		                                        			<div class="input-group">
				                                        		<span class="input-group-addon" style="background-color: #03ACC8;color: #fff;">
				                                        			{% trans "Start from" %}
				                                        		</span>
				                                        		<input class="form-control form-control-inline date-picker" type="text" value="All" id="start_date" onchange="get_start_date();">
				                                        	</div>
		                                        		</div>
			                                        	<div class="col-md-4"></div>
				                                        <div class="col-md-4">
				                                        	<div class="input-group">
				                                        		<span class="input-group-addon" style="background-color: #03ACC8;color: #fff;">
				                                        			{% trans "Status" %}
				                                        		</span>
				                                        		<select id="status" class="form-control select2" onchange="get_selected_status();">
					                                        		{% for status in status_list %}
					                                        		<option value="{{status}}">{{status}}</option>
					                                        		{% endfor %}
					                                        	</select>
				                                        	</div>
				                                        </div>
				                                    </div>
				                                    <div class="table-scrollable">
														<table class="" id="table1">
															<thead>
						                                        <tr>
						                                        	<th> Unformatted Datetime </th>
						                                            <th> {% trans "Updated Date" %}<br>({% trans "YYYY/MM/DD" %}) </th>
						                                            <th> {% trans "Product Name" %} </th>
						                                            <th> {% trans "Reference Number" %} </th>
						                                            <th> {% trans "Amount" %} (HK$)</th>
						                                            <th> {% trans "Annual Interest" %} (%)</th>
						                                            <th> {% trans "Apply Date" %}<br>({% trans "YYYY/MM/DD" %})</th>
						                                            <th> {% trans "Repayment Progress" %} </th>
						                                            <th> {% trans "Status" %} </th>
						                                            <th> {% trans "Detail" %} </th>
						                                        </tr>
						                                    </thead>
														</table>
													</div>
												</div>
											</form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- END PAGE CONTENT INNER -->
                    </div>
                </div>
                <!-- END PAGE CONTENT BODY -->
                <!-- END CONTENT BODY -->
            </div>
            <!-- END CONTENT -->
        </div>
        <!-- END CONTAINER -->
        <!-- BEGIN FOOTER -->
        <div id="footer"></div>
        <!-- END FOOTER -->
        <!--[if lt IE 9]>
<script src="../assets/global/plugins/respond.min.js"></script>
<script src="../assets/global/plugins/excanvas.min.js"></script> 
<![endif]-->
        <!-- BEGIN CORE PLUGINS -->
        <script src="{% static 'peerloan/global/plugins/jquery.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'peerloan/global/plugins/bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'peerloan/global/plugins/js.cookie.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'peerloan/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js' %}" type="text/javascript"></script>
        <!-- END CORE PLUGINS -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <script src="{% static 'peerloan/global/scripts/datatable.js' %}" type="text/javascript"></script>
        <script src="{% static 'peerloan/global/plugins/datatables/datatables.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'peerloan/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js' %}" type="text/javascript"></script>
        
        <script src="{% static 'peerloan/global/plugins/moment.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'peerloan/global/plugins/bootstrap-daterangepicker/daterangepicker.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'peerloan/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'peerloan/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'peerloan/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js' %}" type="text/javascript"></script>
        <!-- END PAGE LEVEL PLUGINS -->
        <!-- BEGIN THEME GLOBAL SCRIPTS -->
        <script src="{% static 'peerloan/global/scripts/app.min.js' %}" type="text/javascript"></script>
        <!-- END THEME GLOBAL SCRIPTS -->
        <!-- BEGIN PAGE LEVEL SCRIPTS -->
        <script src="{% static 'peerloan/pages/scripts/table-datatables-buttons.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'peerloan/pages/scripts/components-date-time-pickers.min.js' %}" type="text/javascript"></script>
        <!-- END PAGE LEVEL SCRIPTS -->
        <!-- BEGIN THEME LAYOUT SCRIPTS -->
        <script src="{% static 'peerloan/layouts/layout3/scripts/layout.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'peerloan/layouts/layout3/scripts/demo.min.js' %}" type="text/javascript"></script>
        <!-- END THEME LAYOUT SCRIPTS -->
		<!-- BEGIN BAIDU ECHARTS SCRIPTS -->
        <!-- END BAIDU ECHARTS SCRIPTS -->
    </body>

<script type="text/javascript" language="javascript" class="init">
var selected_status = document.getElementById('status').value;
var start_date = document.getElementById('start_date').value;

function get_selected_status(){
	selected_status = document.getElementById('status').value;
}
function get_start_date(){
	start_date = document.getElementById('start_date').value;
}

function update_datatable(){
    
    var table = $('#table1').DataTable( {
        "ajax": 
        {   "url": "/loan_list_json/?status="+selected_status+'&start_date='+start_date,
        },
        columns: [
        { "data": 'shadow_datetime' },
        { "data": 'updated_date' },
        { "data": 'prod_name' },
        { "data": 'ref_num' },
        { "data": 'amount' },
        { "data": 'APR' },
        { "data": 'apply_date' },
        { "data": 'repayment_progress' },
        { "data": 'status' },
        { "data": 'bor_id' },
        ],
        
        "columnDefs": [
        	{
        		// shadow time used to sort
        		"targets": 0,
        		"visible": false,
        		"searchable": false
        	},
        	{
        		"targets": 1,
        		orderData: [0, 1]
        	},
	        {
	        	"render": function (data, type, row) {
			        return '<a href="'+row['href']+' "target="_blank" class="btn green-jungle">{% trans "Browse" %}</a>'
				},
				"targets": -1
	        }
        ],
        "order": [[ 0, "desc" ]],
        "sDom": "t<'row'<'col-md-1'l><'col-md-3 pad-top-5'i><'col-md-4'p>>",
        "language": {
        	"lengthMenu": "_MENU_",
        	 "info": "<strong>_START_</strong> - <strong>_END_</strong> of <strong>_TOTAL_</strong>",
        }
    } );
}

$(document).ready(function() {
      	update_datatable();
      	oTable = $('#table1').DataTable();   //pay attention to capital D, which is mandatory to retrieve "api" datatables' object, as @Lionel said
		$('#dataTableSearch').keyup(function(){
		      oTable.search($(this).val()).draw() ;
	})
});
$('#status').change(function() {
	$("#table1").dataTable().fnDestroy();
	update_datatable();
});
$('#start_date').change(function() {
	$("#table1").dataTable().fnDestroy();
	update_datatable();
});
</script>

</html>
{% endlanguage %}
{% load google_analytics_tags %}
<div style="display:none">
    <img src="{% google_analytics %}" width="0" height="0" />
</div>