<!DOCTYPE html><!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]--><!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]--><!--[if !IE]><!-->{% load i18n %}{% language lang %}<html lang="en">    <!-- BEGIN HEAD -->    <head>        <meta charset="utf-8" />        <title>{% trans "Zwap" %}</title>        <meta http-equiv="X-UA-Compatible" content="IE=edge">        <meta content="width=device-width, initial-scale=1" name="viewport" />        <meta content="" name="description" />        <meta content="" name="author" />        {% load staticfiles %}        {% load my_tags %}        <script src="//code.jquery.com/jquery-1.10.2.js"></script>        <script>		$(function(){		  $("#header").load("/header/{{cate}}/{{sub_cate}}", function(){Layout.init()}); 		  $("#footer").load("/footer"); 		});		</script>        <!-- BEGIN GLOBAL MANDATORY STYLES -->        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/simple-line-icons/simple-line-icons.min.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/uniform/css/uniform.default.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css' %}" rel="stylesheet" type="text/css" />        <!-- END GLOBAL MANDATORY STYLES -->        <!-- BEGIN PAGE LEVEL PLUGINS -->        <link href="{% static 'peerloan/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/global/plugins/clockface/css/clockface.css' %}" rel="stylesheet" type="text/css" />        <!-- END PAGE LEVEL PLUGINS -->        <!-- BEGIN THEME GLOBAL STYLES -->        <link href="{% static 'peerloan/global/css/components.min.css' %}" rel="stylesheet" id="style_components" type="text/css" />        <link href="{% static 'peerloan/global/css/plugins.min.css' %}" rel="stylesheet" type="text/css" />        <!-- END THEME GLOBAL STYLES -->        <!-- BEGIN THEME LAYOUT STYLES -->        <link href="{% static 'peerloan/layouts/layout3/css/layout.css' %}" rel="stylesheet" type="text/css" />        <link href="{% static 'peerloan/layouts/layout3/css/themes/default.min.css' %}" rel="stylesheet" type="text/css" id="style_color" />        <link href="{% static 'peerloan/layouts/layout3/css/custom.min.css' %}" rel="stylesheet" type="text/css" />        <!-- END THEME LAYOUT STYLES -->        <link rel="shortcut icon" href="{% static 'favicon.ico' %}" />        <style>			.loader {				color: #B6294D ! important;			}			.tooltip.top {			width: 200px !important;			}		</style>    </head>    <!-- END HEAD -->    <body class="page-container-bg-solid page-boxed">        <!-- BEGIN HEADER -->        <div id="header"></div>        <!-- END HEADER -->        <!-- BEGIN CONTAINER -->        <div class="page-container">            <!-- BEGIN CONTENT -->            <div class="page-content-wrapper">            	<!-- BEGIN PAGE HEAD-->                <div class="page-head">                    <div class="container">                        <!-- BEGIN PAGE TITLE -->                        <div class="page-title">                            <h1>{{title}}</h1>                        </div>                        <!-- END PAGE TITLE -->                    </div>                </div>                <!-- END PAGE HEAD-->                <!-- BEGIN CONTENT BODY -->                <!-- BEGIN PAGE CONTENT BODY -->                <div class="page-content">                    <div class="container">                        <!-- BEGIN PAGE CONTENT INNER -->                        <div class="page-content-inner">                            <div class="row">                                <div class="col-md-12">                                    <!-- BEGIN VALIDATION STATES-->                                    <div class="portlet light form-fit portlet-form ">                                        <div class="portlet-body">                                            <!-- BEGIN FORM PREFACE-->                                            <form validate action="javascript:;" class="form-horizontal form-bordered" method="post" enctype="multipart/form-data">                                            	{% csrf_token %}                                            	<div class="form-body">                                            		<h4 class="form-section" style="border-bottom:0px;">                                            			<div class="row">	                                            			<div class="col-md-4">	                                            				<strong>{% trans "Account Summary" %} ({{today}})</strong>	                                            			</div>                                            				<div class="col-md-4">&nbsp;</div>	                                            			<div class="col-md-4">	                                            				<a href="javascript: void(0)" class="btn green-jungle" style="float:right;margin-top:-10px !important;" onclick="window.open('/portfolio/portfolio_summary/estimated_returning_schedule/','new_window','width=1000, height=800');">{% trans "Estimated Returning Schedule" %}</a>	                                            			</div>                                            			</div>                                            		</h4>													<div class="form-group">														<label class="col-md-3 control-label" style="text-align:left;"><strong>{% trans "Account Balance" %}:</strong></label>														<div class="col-md-3"><strong><p class="form-control-static" id="Account_Amount"></p></strong></div>														<label class="col-md-3 control-label" style="text-align:left;"><strong>{% trans "Outstanding Balance" %}:</strong></label>														<div class="col-md-3"><strong><p class="form-control-static" id="Matched_Amount"></p></strong></div>													</div>													<div class="form-group">														<label class="col-md-3 control-label" style="text-align:left;"><strong>{% trans "Available Amount" %}:</strong></label>														<div class="col-md-3"><strong><p class="form-control-static" id="Unallocated_Amount"></p></strong></div>														<label class="col-md-3 control-label" style="text-align:left;"><strong>{% trans "Queuing Amount" %}:</strong></label>														<div class="col-md-3"><strong><p class="form-control-static" id="Un_matched_Amount"></p></strong></div>													</div>																									</div>											</form>										</div>									</div>									<div class="portlet light form-fit portlet-form ">                                        <div class="portlet-body">                                            <!-- BEGIN FORM PREFACE-->                                            <form validate action="javascript:;" class="form-horizontal form-bordered" method="post" enctype="multipart/form-data">                                            	{% csrf_token %}												<div class="form-body">                                            		<h4 class="form-section" style="border-bottom:0px;">                                            			<div class="row">	                                            			<div class="col-md-4">	                                            				<strong>{% trans "Portfolio Basic Information" %} (<text id="viewing_period"></text>)</strong>	                                            			</div>	                                            			<div class="col-md-4">&nbsp;</div>	                                            			<div class="input-group col-md-4" style="float:right;margin-top:-10px !important">				                                        		<span class="input-group-addon" style="background-color: #03ACC8;color: #fff;">				                                        			{% trans "Search By Month" %}				                                        		</span>				                                        						                                        		<select class="form-control select2" style="float:right;" id="date_1" onchange='update_all_pie_echart(document.getElementById("date_1").value, "change_event");'>				                                        			<option disabled selected value> -- {% trans "please select a value" %} -- </option>				                                        			{% for ele in search_month_list %}					                                        		<option value="{{ele.value}}" >{{ele.name}}</option>					                                        		{% endfor %}					                                        	</select>				                                        	</div>				                                        </div>                                            		</h4>                                            		<div class="form-group">                                            			<label class="col-md-3 control-label" style="text-align:left;">{% trans "Accrued Interest" %}                                            			<i class="fa fa-question-circle tooltips" data-original-title="{% trans 'The amount of loan interest that has already occurred' %}"></i>                                            			:                                            			</label>                                            			<div class="col-md-3">                                            				<p class="form-control-static" id="Accrued_Interest"></p>                                            			</div>                                            			<label class="col-md-3 control-label" style="text-align:left;">{% trans "Weighted Annual Return" %}                                            			<i class="fa fa-question-circle tooltips" data-original-title="{% trans 'The aggregate rate of interest paid on all debt' %}"></i>                                            			:                                            			</label>                                            			<div class="col-md-3">                                            				<p class="form-control-static" id="Weighted_Annual_Interest_Rate"></p>                                            			</div>                                            		</div>                                            		<div class="form-group">                                            			<label class="col-md-3 control-label" style="text-align:left;">{% trans "Active Loan" %}:</label>                                            			<div class="col-md-1">                                            				<p class="form-control-static" id="Active_Account"></p>                                            				                                            			</div>                                            			<div class="col-md-2">                                            				<a href="/portfolio/active_investment/" class="btn green-jungle" target="_blank">																{% trans "View" %}                                            				</a>                                            			</div>                                            			<label class="col-md-3 control-label" style="text-align:left;">{% trans "New Loan" %}:</label>                                            			<div class="col-md-3">                                            				<p class="form-control-static" id="New_Account"></p>                                            			</div>                                            		</div>                                            		<br>                                            		<h4 class="form-section" style="border-bottom:0px;"><strong>{% trans "Portfolio Summary" %} (<text id="viewing_period_2"></text>)</strong></h4>	                                                				                                    <div class="row">														<div class="col-md-5">															<h4 class="form-section">{% trans "Repayment Received" %}:																<p style="float:right" id="repayment_received_amt"></p>															</h4>															<div id="echarts_pie_2" style="height:400px;"></div>														</div>														<div class="col-md-2"></div>														<div class="col-md-5">															<h4 class="form-section">{% trans "Repayment Status" %}</h4>															<div id="echarts_pie_3" style="height:400px;"></div>														</div>													</div>																										<h4 class="form-section">{% trans "Trend Summary" %}</h4>													<div class="row">		                                        		<div class="col-md-4">		                                        			<div class="input-group">				                                        		<span class="input-group-addon" style="background-color: #03ACC8;color: #fff;">				                                        			{% trans "Trend" %}				                                        		</span>				                                        		<select class="form-control select2" id="trend" onchange="update_line_echart();">					                                        		<option value="Outstanding Balance">{% trans "Outstanding Balance" %}</option>					                                        		<option value="No. of Active Account">{% trans "No. of Active Loan" %}</option>					                                        		<option value="Accrued Interest">{% trans "Accrued Interest" %}</option>					                                        		<option value="New Account">{% trans "New Loan" %}</option>					                                        		<option value="No. of New Account">{% trans "No. of New Loan" %}</option>					                                        	</select>				                                        	</div>		                                        		</div>			                                        	<div class="col-md-5"></div>				                                        <div class="col-md-3">				                                        	<div class="input-group">				                                        		<span class="input-group-addon" style="background-color: #03ACC8;color: #fff;">				                                        			{% trans "Year" %}				                                        		</span>				                                        		<select class="form-control select2" id="year" onchange="update_line_echart();">					                                        		<option value="2016">2016</option>					                                        		<option value="2015">2015</option>					                                        	</select>				                                        	</div>				                                        </div>				                                    </div>				                                    <div class="row" style="display: none;">														<div class="col-md-12">															<div class="portlet light ">																<div class="portlet-body">																	<div id="echarts_line" style="height:400px;"></div>																</div>															</div>														</div>													</div>                                                </div>                                            </form>                                            <!-- END FORM PREFACE-->                                        </div>                                    </div>                                    <!-- END VALIDATION STATES-->                                                                                                        </div>                            </div>                        </div>                        <!-- END PAGE CONTENT INNER -->                    </div>                </div>                <!-- END PAGE CONTENT BODY -->                <!-- END CONTENT BODY -->            </div>            <!-- END CONTENT -->        </div>        <!-- END CONTAINER -->        <!-- BEGIN FOOTER -->        <div id="footer"></div>        <!-- END FOOTER -->        <!--[if lt IE 9]><script src="../assets/global/plugins/respond.min.js"></script><script src="../assets/global/plugins/excanvas.min.js"></script> <![endif]-->        <!-- BEGIN CORE PLUGINS -->        <script src="{% static 'peerloan/global/plugins/jquery.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/js.cookie.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/jquery.blockui.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/uniform/jquery.uniform.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js' %}" type="text/javascript"></script>        <!-- END CORE PLUGINS -->        <!-- BEGIN PAGE LEVEL PLUGINS -->        <script src="{% static 'peerloan/global/plugins/moment.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/bootstrap-daterangepicker/daterangepicker.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/global/plugins/clockface/js/clockface.js' %}" type="text/javascript"></script>        <!-- END PAGE LEVEL PLUGINS -->        <!-- BEGIN THEME GLOBAL SCRIPTS -->        <script src="{% static 'peerloan/global/scripts/app.min.js' %}" type="text/javascript"></script>        <!-- END THEME GLOBAL SCRIPTS -->        <!-- BEGIN PAGE LEVEL SCRIPTS -->        <script src="{% static 'peerloan/pages/scripts/components-date-time-pickers.min.js' %}" type="text/javascript"></script>        <!-- END PAGE LEVEL SCRIPTS -->        <!-- BEGIN THEME LAYOUT SCRIPTS -->        <script src="{% static 'peerloan/layouts/layout3/scripts/layout.min.js' %}" type="text/javascript"></script>        <script src="{% static 'peerloan/layouts/layout3/scripts/demo.min.js' %}" type="text/javascript"></script>        <!-- END THEME LAYOUT SCRIPTS -->        <!-- BEGIN BAIDU ECHARTS SCRIPTS -->		<script src="{% static 'peerloan/global/plugins/echarts/echarts.js' %}" type="text/javascript"></script>        <!-- END BAIDU ECHARTS SCRIPTS -->    </body><script type="text/javascript" language="javascript" class="init">var name_list = [];var data_list = [];var color_list = [];var option = {    legend : {        orient : 'vertical',        x : 'left',        data:[]    },    tooltip : {        trigger: 'item',        formatter: "{a} <br/>{b} : {c} ({d}%)"    },    series : [        {            name: 'Source',            type: 'pie',            radius : '55%',            center: ['50%', '60%'],            data:[            ],            itemStyle: {                normal : {                    label: { show: false },                    labelLine: { show: false },                },            }        }    ]};function update_all_pie_echart(this_month, action) {	// ECHARTS    require.config({        paths: {            echarts: "/static/peerloan/global/plugins/echarts/"        }    });    // DEMOS    require(        [            'echarts',            'echarts/chart/pie',        ],		function(ec) {			// -- PIE --                        var pie_2 = ec.init(document.getElementById('echarts_pie_2'));            var pie_3 = ec.init(document.getElementById('echarts_pie_3'));			$.ajax({				type: "get",				async: false,				url: "/portfolio_pie_list_json/?date="+this_month,				dataType: "json",				success: function (result) {					// update basic info					$("#Accrued_Interest").html('HK$'+result.basic_info["Accrued Interest"]);					$("#Weighted_Annual_Interest_Rate").html(result.basic_info["Weighted Annual Interest Rate"]);					$("#Active_Account").html(result.basic_info["Active Account"]);					$("#New_Account").html('HK$'+result.basic_info["New Account"]);					$("#viewing_period").html(result.basic_info["Period"]);					$("#viewing_period_2").html(result.basic_info["Period"]);										if (action == 'init') {						$("#Account_Amount").html('HK$'+result.account_summary["Account Amount"]);						$("#Unallocated_Amount").html('HK$'+result.account_summary["Unallocated Amount"]);						$("#Un_matched_Amount").html('HK$'+result.account_summary["Un-matched Amount"]);						$("#Matched_Amount").html('HK$'+result.account_summary["Matched Amount"]);											}										// update pie 2					//option.title.text = result.title_2;					$("#repayment_received_amt").html(result.title_2);					name_list = [];					data_list = [];					//color_list = [];					for (object in result.data_2)					{						if (result.data_2[object].name.indexOf('Total') > -1) { continue; }						//if (result.data[object].amount == 0) { continue; }						name_list.push(result.data_2[object].name)						if (result.data_2[object].amount < 1000) {							data_list.push({value:Number(result.data_2[object].amount), name:result.data_2[object].name});						}						else {							data_list.push({value:Number(result.data_2[object].amount.replace(',', '')), name:result.data_2[object].name});						}												//color_list.push(result.data[object].color)					}					option.legend.data=name_list;					option.series[0].data=data_list;					pie_2.setOption(option);										// update pie 3					//option.title.text = result.title_3;					name_list = [];					data_list = [];					//color_list = [];					for (object in result.data_3)					{						if (result.data_3[object].name.indexOf('Total') > -1) { continue; }						//if (result.data[object].amount == 0) { continue; }						name_list.push(result.data_3[object].name)						if (result.data_3[object].amount < 1000) {							data_list.push({value:Number(result.data_3[object].amount), name:result.data_3[object].name});						}						else {							data_list.push({value:Number(result.data_3[object].amount.replace(',','')), name:result.data_3[object].name});						}												//color_list.push(result.data[object].color)					}					option.legend.data=name_list;					option.series[0].data=data_list;					pie_3.setOption(option);				},				error: function (errorMsg) {					alert("Error: Loading JSON");				}			});			        }    );}$(document).ready(function() {	update_all_pie_echart("{{this_month}}" ,'init');	//$('.date-picker').datepicker().on('changeDate', function(ev) {	//	update_all_pie_echart(document.getElementById("date_1").value, 'change_event');	//});});</script><script type="text/javascript" language="javascript" class="init">var x_list = [];var y_list = [];var option_line = {	/*title : {        text: '',        x:'left'    },*/    tooltip : {        trigger: 'axis'    },    calculable : true,    xAxis : [        {            type : 'category',            boundaryGap : false,            data : []        }    ],    yAxis : [        {            type : 'value',            axisLabel : {                formatter: ''            }        }    ],    series : [        {        	name:'Data',            type:'line',            data:[]        }    ]};function update_line_echart() {	// ECHARTS    require.config({        paths: {            echarts: "/static/peerloan/global/plugins/echarts/"        }    });    // DEMOS    require(        [            'echarts',            'echarts/chart/line',        ],		function(ec) {			// -- PIE --            var myChartline = ec.init(document.getElementById('echarts_line'));            var trend = document.getElementById('trend').value;            var year = document.getElementById('year').value;			$.ajax({				type: "get",				async: false,				url: "/portfolio_line_list_json/?trend="+trend+'&year='+year,				dataType: "json",				success: function (result) {										x_list = [];					y_list = [];					for (object in result.data) {						x_list.push(result.data[object].x);						y_list.push(result.data[object].y);					}										//option_line.title.text = result.title;					option_line.yAxis[0].axisLabel.formatter = result.formatter;					option_line.xAxis[0].data=x_list;					option_line.series[0].data=y_list;					myChartline.setOption(option_line);		        },		        error: function (errorMsg) {					alert("Error: Loading JSON");				}		    });		}    );};$(document).ready(function() {	update_line_echart();});</script></html>{% endlanguage %}{% load google_analytics_tags %}<div style="display:none">    <img src="{% google_analytics %}" width="0" height="0" /></div>